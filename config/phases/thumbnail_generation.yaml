# Phase 8: Thumbnail Generation（V3.0最終版）
# YouTubeサムネイル生成の設定 - 赤文字上部＋白文字下部レイアウト
#
# ================================
# V3.0 仕様概要
# ================================
#
# 【レイアウト構成】（25/50/25）
# ┌──────────────────────────────────┐
# │  上部25%: なぜ死んだ？            │ ← 赤グラデーション
# │  （5-8文字、疑問形・衝撃系）      │   超大フォント（140-180px）
# ├──────────────────────────────────┤
# │                                  │
# │  中央50%: 【人物の顔】           │ ← DALL-E 3生成
# │  （明るいまま、暗くしない）       │   軽いビネットのみ（20%）
# │                                  │
# ├──────────────────────────────────┤
# │  下部25%: 手洗いで命を救った男の  │ ← 白文字＋黒縁
# │  真実（15-25文字）               │   半透明黒背景付き
# └──────────────────────────────────┘
#
# 【主な特徴】
# 1. 上部テキスト: 赤グラデーション（#FF0000→#FF6B6B→#FFAAAA）
# 2. 下部テキスト: 白単色＋黒縁のみ（グラデーションなし）
# 3. 背景処理: 暗くせず、軽いビネット（0.2）のみ
# 4. テキスト内容: 専門用語を避け、誰でも理解できる言葉
# 5. DALL-E 3: 人物の顔を中央に配置、明るい照明
#
# 【使用クラス】
# - ImpactTextGenerator: 疑問形・衝撃系テキスト生成
# - SimpleBackgroundProcessor: 軽いビネットのみの背景処理
# - V3TextRenderer: 赤グラデーション＋白黒縁のテキスト描画
# - FinalThumbnailGenerator: メイン統合クラス

# 生成方法選択
# - false: Pillowで画像に文字をオーバーレイ（5枚生成、無料）
# - true: DALL-E 3でAI生成（V3.0レイアウト、$0.040/枚）
use_dalle: true

# DALL-E 3 / GPT Image 1設定（use_dalle: trueの場合）
dalle:
  size: "1792x1024"        # 画像サイズ（YouTube最適: 1792x1024横長）
  quality: "standard"       # 画質（standard or hd）
  style: "dramatic"         # スタイル（dramatic, elegant, energetic, mysterious）

# GPT Image 1 + Pillow + Claude設定
gptimage:
  model: "dall-e-3"         # 画像生成モデル（dall-e-3 または gpt-image-1）
  width: 1280               # サムネイル幅
  height: 720               # サムネイル高さ
  style: "dramatic"         # 画像スタイル（dramatic, professional, minimalist, vibrant）
  quality: "medium"         # 画像品質（low, medium, high）
  layout: "center"          # テキストレイアウト（center, left, right）

# インパクトテキスト生成設定（V3.0 - 赤文字上部＋白文字下部）
catchcopy:
  enabled: true             # テキスト生成を有効化
  model: "gpt-4.1-mini"     # 使用するモデル
  tone: "impact"            # トーン（impact: 疑問形・衝撃系）
  target_audience: "一般"   # ターゲット層
  main_title_length: 8      # 上部テキストの最大文字数（5-8文字厳守）
  sub_title_length: 25      # 下部テキストの最大文字数（15-25文字推奨）
  num_candidates: 5         # 生成する候補数
  avoid_technical_terms: true  # 専門用語を避ける

# サムネイル基本設定
output:
  resolution: [1280, 720]    # YouTubeサムネイル標準解像度（16:9）
  format: "png"              # PNG形式（高品質）
  quality: 95                # 品質（0-100）
  patterns: 5                # 生成するパターン数

# 画像生成設定（V3.0）
image_generation:
  focus: "person_face"       # 人物の顔を中央に配置
  brightness: "normal"       # 明るさ（暗くしない！）
  vignette_strength: 0.2     # ビネット強度（軽いビネットのみ、0.2=20%）

# レイアウト設定（V3.0 - 25/50/25）
layout:
  main_text_zone: 0.25       # 上部25%: メインキャッチ（赤グラデーション）
  person_zone: 0.50          # 中央50%: 人物画像（明るいまま）
  sub_text_zone: 0.25        # 下部25%: サブ説明文（白＋黒縁）

# テキストスタイル設定（V3.0）
text_style_v3:
  main_text:                 # 上部テキスト（赤グラデーション）
    gradient_colors:
      - "#FF0000"            # 濃い赤
      - "#FF6B6B"            # 中間赤
      - "#FFAAAA"            # 薄い赤
    font_size_range: [140, 180]  # 文字数で調整
    stroke_black: 25         # 黒縁25px
    stroke_white: 12         # 白縁12px
    shadow_offset: [8, 8]    # シャドウオフセット
    shadow_blur: 10          # シャドウぼかし

  sub_text:                  # 下部テキスト（白＋黒縁）
    color: "#FFFFFF"         # 白単色
    font_size: 50            # 固定サイズ
    stroke_black: 10         # 黒縁10px
    background_opacity: 150  # 半透明黒背景（150/255）
    background_padding: 20   # 背景パディング
    background_blur: 5       # 背景ぼかし

# 画像選択設定
image_selection:
  criteria:
    - "人物の顔が含まれている"
    - "インパクトのある構図"
    - "明るさとコントラストが適切"
    - "中央に被写体がある"
    - "劇的なシーンや象徴的な要素"
  fallback_method: "first_image"

# テキスト生成設定
text_generation:
  llm_enabled: true
  title_patterns:
    - "short_impactful"
    - "question_form"
    - "dramatic_statement"
    - "number_fact"
    - "contrast_phrase"
  fallback_titles:
    - "{subject}の物語"
    - "{subject}とは何者か"
    - "歴史に残る{subject}"
    - "{subject}の真実"
    - "知られざる{subject}"

# フォント設定（超インパクト版）
fonts:
  main_title:
    family: "GenEi Kiwami Gothic"  # 源暎きわみゴシック
    weight: "Bold"
    size_base: 150                  # 超大幅拡大（90→150）
    size_range: [120, 180]          # サイズ範囲：文字数に応じて自動調整
  subtitle:
    family: "GenEi Kiwami Gothic"
    weight: "Medium"
    size_base: 60                   # より大きく（45→60）
    size_range: [50, 70]

# テキストスタイル設定（超インパクト版）
text_style:
  # グラデーション色パターン（コード内で定義）
  # パターン1: 白→赤→黄（ホット）
  # パターン2: 赤→橙→黄（エネルギッシュ）
  # パターン3: シアン→青（クール）
  # パターン4: 白→ピンク→紫（ドラマチック）
  # パターン5: 緑→黄→赤（フレッシュ）
  
  # 縁取り設定（超強化版）
  stroke:
    enabled: true
    # 多重縁取り：
    # 1. 黒縁25px（最外）
    # 2. 白縁15px
    # 3. カラー縁8px（グラデーションと調和）
    width: 25                    # 最大幅（超強化: 18→25）
    colors:
      outer: "#000000"           # 外側: 黒
      middle: "#FFFFFF"          # 中間: 白
      inner_auto: true           # 内側: グラデーション開始色
    
  # 影設定（立体感強化）
  shadow:
    enabled: true
    # 複数レイヤーの影で立体感を演出
    layers: 8                    # 影のレイヤー数（増加）
    offset_max_x: 8              # X方向最大オフセット（増加）
    offset_max_y: 8              # Y方向最大オフセット（増加）
    blur_radius: 3               # ぼかし半径
    color: "#000000"             # 影色
    opacity_range: [0.2, 0.7]    # 透明度範囲
  
  # グロー効果（追加）
  glow:
    enabled: true
    radius: 20                   # グローの範囲
    iterations: 7                # グローの重ね回数（20→0で徐々に）
    opacity_start: 0.6           # 開始透明度
    blur_radius: 3               # ぼかし半径
  
  # ハイライト（追加）
  highlight:
    enabled: true
    offset_y: -3                 # 上方向にずらす
    opacity: 0.3                 # 半透明
    color: "#FFFFFF"             # 白

# レイアウト設定（改善版）
layout:
  text_positions:
    - "bottom_center"   # 下部中央（最もインパクト）
    - "top_center"      # 上部中央
    - "center_center"   # 中央
    - "top_left"        # 上部左
    - "bottom_right"    # 下部右
  
  margins:
    top: 60                      # 増加（40→60）
    bottom: 60                   # 増加（40→60）
    left: 80                     # 増加（60→80）
    right: 80                    # 増加（60→80）
  
  text_area:
    max_width_percent: 85        # 画面幅の85%まで（80%→85%）
    line_height_multiplier: 1.3  # 行間（1.2→1.3）
    max_lines: 2                 # 最大行数（3→2、短くしてインパクト）

# 画像処理設定（コントラスト強化）
image_processing:
  brightness_adjustment: true
  brightness_range: [0.95, 1.05]   # 若干暗め
  
  contrast_adjustment: true
  contrast_range: [1.1, 1.4]       # コントラスト強化（1.0-1.3→1.1-1.4）
  
  saturation_adjustment: true
  saturation_range: [1.1, 1.3]     # 彩度強化（1.0-1.2→1.1-1.3）
  
  background_blur:
    enabled: false
    radius: 5
    
  vignette:
    enabled: true
    strength: 0.6                  # ビネット超強化（0.4→0.6、文字を際立たせる）

# 出力設定
output_settings:
  filename_pattern: "{subject}_impact_thumbnail_{pattern}_{timestamp}.png"
  output_dir: "thumbnails"
  save_metadata: true
  generate_preview: true

# 品質管理
quality_control:
  min_font_size: 45              # 最小フォントサイズ増加（24→45）
  max_title_length: 20           # 最大文字数減少（30→20、短くインパクト）
  min_contrast_ratio: 5.0        # コントラスト比強化（4.5→5.0）
  min_image_resolution: [1024, 576]

# デバッグ設定
debug:
  save_intermediate_steps: false
  show_text_bounds: false
  verbose_logging: true

# 超インパクト重視の推奨設定（v2.0）
# ================================
# ✅ 画像生成: DALL-E 3で1792x1024（横長）→ 1280x720リサイズ
# ✅ フォント: 源暎きわみゴシック、キルゴU
# ✅ フォントサイズ: 150px基準（文字数で自動調整: 120-180px）
# ✅ グラデーション: 縦方向、3色（白→赤→黄など）
# ✅ 多重縁取り: 黒25px → 白15px → カラー8px
# ✅ 立体感: 8レイヤーの影
# ✅ グロー: 20pxの外側発光
# ✅ ハイライト: 上部に白い光沢
# ✅ 文字数: 10文字以内厳守（理想5-7文字）
# ✅ レイアウト: 下部中央が最強
# ✅ 背景処理: 彩度0.7倍、明度0.6倍、ビネット0.6