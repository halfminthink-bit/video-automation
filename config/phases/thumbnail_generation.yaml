# Phase 8: Thumbnail Generation（改善版）
# YouTubeサムネイル生成の設定 - 超インパクト版

# 生成方法選択
# - false: Pillowで画像に文字をオーバーレイ（5枚生成、無料）
# - true: DALL-E 3 / GPT Image 1でAI生成（1枚生成、高品質、$0.040/枚）
use_dalle: true

# DALL-E 3 / GPT Image 1設定（use_dalle: trueの場合）
dalle:
  size: "1792x1024"        # 画像サイズ（YouTube最適: 1792x1024横長）
  quality: "standard"       # 画質（standard or hd）
  style: "dramatic"         # スタイル（dramatic, elegant, energetic, mysterious）

# GPT Image 1 + Pillow + Claude設定
gptimage:
  model: "dall-e-3"         # 画像生成モデル（dall-e-3 または gpt-image-1）
  width: 1280               # サムネイル幅
  height: 720               # サムネイル高さ
  style: "dramatic"         # 画像スタイル（dramatic, professional, minimalist, vibrant）
  quality: "medium"         # 画像品質（low, medium, high）
  layout: "center"          # テキストレイアウト（center, left, right）

# Claudeキャッチコピー生成設定（3ゾーンレイアウト用・2段テキスト）
catchcopy:
  enabled: true             # キャッチコピー生成を有効化
  model: "gpt-4.1-mini"     # 使用するモデル
  tone: "dramatic"          # トーン（dramatic, shocking, educational, casual）
  target_audience: "一般"   # ターゲット層
  main_title_length: 7      # メインキャッチの最大文字数（5-7文字厳守）
  sub_title_length: 20      # サブ説明文の最大文字数（15-20文字推奨）
  num_candidates: 5         # 生成する候補数

# 3ゾーンレイアウト設定（新システム）
three_zone_layout:
  enabled: true             # 3ゾーンレイアウトを使用
  zones:
    main_text:              # 上部30%: メインキャッチ
      height_percent: 0.30
      font_size_range: [120, 180]  # 文字数で自動調整
      stroke_widths: [35, 20]      # 黒35px, 白20px
    image_area:             # 中央40%: 人物画像
      height_percent: 0.40
      preserve_brightness: true     # 明るさを維持
      darken_strength: 0.7          # 上下の暗さ強度
    sub_text:               # 下部30%: サブ説明文
      height_percent: 0.30
      font_size: 50                 # 固定サイズ
      stroke_widths: [12, 6]        # 黒12px, 白6px
      background_band: true         # 半透明背景帯を追加

# サムネイル基本設定
output:
  resolution: [1280, 720]    # YouTubeサムネイル標準解像度（16:9）
  format: "png"              # PNG形式（高品質）
  quality: 95                # 品質（0-100）
  patterns: 5                # 生成するパターン数

# 画像選択設定
image_selection:
  criteria:
    - "人物の顔が含まれている"
    - "インパクトのある構図"
    - "明るさとコントラストが適切"
    - "中央に被写体がある"
    - "劇的なシーンや象徴的な要素"
  fallback_method: "first_image"

# テキスト生成設定
text_generation:
  llm_enabled: true
  title_patterns:
    - "short_impactful"
    - "question_form"
    - "dramatic_statement"
    - "number_fact"
    - "contrast_phrase"
  fallback_titles:
    - "{subject}の物語"
    - "{subject}とは何者か"
    - "歴史に残る{subject}"
    - "{subject}の真実"
    - "知られざる{subject}"

# フォント設定（超インパクト版）
font:
  # フォントパス（Windows/Linux対応・自動検出）
  path: null  # nullの場合は自動検出（assets/fonts/, C:\Windows\Fonts, /usr/share/fonts）
  target_coverage: 0.7  # 画面占有率（0.7 = 70%）

fonts:
  main_title:
    family: "GenEi Kiwami Gothic"  # 源暎きわみゴシック
    weight: "Bold"
    size_base: 150                  # 超大幅拡大（90→150）
    size_range: [120, 200]          # サイズ範囲：文字数に応じて自動調整（1文字=200px, 8文字=110px）
  subtitle:
    family: "GenEi Kiwami Gothic"
    weight: "Medium"
    size_base: 60                   # より大きく（45→60）
    size_range: [50, 70]

# グラデーションパターン設定（ImpactThumbnailGenerator用）
gradient_patterns:
  fire: ["#FFFFFF", "#FF0000", "#FFFF00"]      # 白→赤→黄（ホット・劇的）
  ocean: ["#FFFFFF", "#00FFFF", "#0080FF"]     # 白→シアン→青（クール・事実）
  sunset: ["#FF0000", "#FF7F00", "#FFFF00"]    # 赤→橙→黄（エネルギッシュ・対立）
  neon: ["#FFFFFF", "#FF1493", "#9400D3"]      # 白→ピンク→紫（ドラマチック・謎）
  energy: ["#00FF00", "#FFFF00", "#FF0000"]    # 緑→黄→赤（フレッシュ・命令）

# 多重縁取り設定（ImpactThumbnailGenerator用）
multi_stroke:
  layers:
    - width: 30
      color: "#000000"
      opacity: 255
    - width: 18
      color: "#FFFFFF"
      opacity: 255
    - width: 8
      color: "gradient_start"  # グラデーション開始色を使用
      opacity: 255

# エフェクト設定（ImpactThumbnailGenerator用）
effects:
  shadow:
    layers: 10               # シャドウレイヤー数
    max_offset: 20           # 最大オフセット（ピクセル）
    blur_radius: 5           # ぼかし半径
  glow:
    radius: 30               # グローの範囲
    intensity: 0.7           # グローの強度（0.0〜1.0）
    color: "auto"            # "auto"の場合は黒
  vignette:
    strength: 0.6            # ビネットの強さ（0.0〜1.0）

# 背景処理設定（ImpactThumbnailGenerator用）
background:
  darken_factor: 0.6         # 暗くする係数（0.6 = 60%）
  saturation_factor: 0.7     # 彩度係数（0.7 = 70%）
  brightness_factor: 0.6     # 明度係数（0.6 = 60%）

# テキストスタイル設定（レガシー・互換性用）
text_style:
  # 縁取り設定
  stroke:
    enabled: true
    width: 30                    # 最大幅（超強化: 25→30）
    colors:
      outer: "#000000"           # 外側: 黒
      middle: "#FFFFFF"          # 中間: 白
      inner_auto: true           # 内側: グラデーション開始色
    
  # 影設定（立体感強化）
  shadow:
    enabled: true
    # 複数レイヤーの影で立体感を演出
    layers: 8                    # 影のレイヤー数（増加）
    offset_max_x: 8              # X方向最大オフセット（増加）
    offset_max_y: 8              # Y方向最大オフセット（増加）
    blur_radius: 3               # ぼかし半径
    color: "#000000"             # 影色
    opacity_range: [0.2, 0.7]    # 透明度範囲
  
  # グロー効果（追加）
  glow:
    enabled: true
    radius: 20                   # グローの範囲
    iterations: 7                # グローの重ね回数（20→0で徐々に）
    opacity_start: 0.6           # 開始透明度
    blur_radius: 3               # ぼかし半径
  
  # ハイライト（追加）
  highlight:
    enabled: true
    offset_y: -3                 # 上方向にずらす
    opacity: 0.3                 # 半透明
    color: "#FFFFFF"             # 白

# レイアウト設定（改善版）
layout:
  text_positions:
    - "bottom_center"   # 下部中央（最もインパクト）
    - "top_center"      # 上部中央
    - "center_center"   # 中央
    - "top_left"        # 上部左
    - "bottom_right"    # 下部右
  
  margins:
    top: 60                      # 増加（40→60）
    bottom: 60                   # 増加（40→60）
    left: 80                     # 増加（60→80）
    right: 80                    # 増加（60→80）
  
  text_area:
    max_width_percent: 85        # 画面幅の85%まで（80%→85%）
    line_height_multiplier: 1.3  # 行間（1.2→1.3）
    max_lines: 2                 # 最大行数（3→2、短くしてインパクト）

# 画像処理設定（コントラスト強化）
image_processing:
  brightness_adjustment: true
  brightness_range: [0.95, 1.05]   # 若干暗め
  
  contrast_adjustment: true
  contrast_range: [1.1, 1.4]       # コントラスト強化（1.0-1.3→1.1-1.4）
  
  saturation_adjustment: true
  saturation_range: [1.1, 1.3]     # 彩度強化（1.0-1.2→1.1-1.3）
  
  background_blur:
    enabled: false
    radius: 5
    
  vignette:
    enabled: true
    strength: 0.6                  # ビネット超強化（0.4→0.6、文字を際立たせる）

# 出力設定
output_settings:
  filename_pattern: "{subject}_impact_thumbnail_{pattern}_{timestamp}.png"
  output_dir: "thumbnails"
  save_metadata: true
  generate_preview: true

# 品質管理
quality_control:
  min_font_size: 45              # 最小フォントサイズ増加（24→45）
  max_title_length: 20           # 最大文字数減少（30→20、短くインパクト）
  min_contrast_ratio: 5.0        # コントラスト比強化（4.5→5.0）
  min_image_resolution: [1024, 576]

# デバッグ設定
debug:
  save_intermediate_steps: false
  show_text_bounds: false
  verbose_logging: true

# 超インパクト重視の推奨設定（v2.0）
# ================================
# ✅ 画像生成: DALL-E 3で1792x1024（横長）→ 1280x720リサイズ
# ✅ フォント: 源暎きわみゴシック、キルゴU
# ✅ フォントサイズ: 150px基準（文字数で自動調整: 120-180px）
# ✅ グラデーション: 縦方向、3色（白→赤→黄など）
# ✅ 多重縁取り: 黒25px → 白15px → カラー8px
# ✅ 立体感: 8レイヤーの影
# ✅ グロー: 20pxの外側発光
# ✅ ハイライト: 上部に白い光沢
# ✅ 文字数: 10文字以内厳守（理想5-7文字）
# ✅ レイアウト: 下部中央が最強
# ✅ 背景処理: 彩度0.7倍、明度0.6倍、ビネット0.6

# ================================
# 3ゾーンレイアウトシステム（v3.0 - 最新）
# ================================
# 【概要】
# 人物中央配置 + 2段テキスト（上下）の新レイアウト
#
# 【構成】
# ┌─────────────────────┐
# │  上部30%: メインキャッチ   │ 5-7文字、超インパクト
# │  （例: "手を洗え！"）      │ フォント: 150-180px
# ├─────────────────────┤
# │  中央40%: 人物画像        │ 明るさ維持
# │  （DALL-E 3生成）         │ 周辺は暗く処理
# ├─────────────────────┤
# │  下部30%: サブ説明文      │ 15-20文字
# │  （例: "今では当たり前の） │ フォント: 50px
# │   常識を生んだ男"）       │ 半透明背景帯付き
# └─────────────────────┘
#
# 【配色スキーム】（5種類自動選択）
# - fire: 炎・情熱系（白→黄→赤）
# - ocean: 海・清潔系（白→シアン→青）
# - royal: 王室・高貴系（金→赤→紫）
# - nature: 自然・生命系（緑→黄→赤）
# - electric: 電気・未来系（白→ピンク→シアン）
#
# 【使用クラス】
# - ThreeZoneThumbnailGenerator: メイン統合クラス
# - DualTextSystem: メイン+サブのテキストペア生成
# - ThreeZoneLayoutManager: 3分割レイアウト管理
# - PersonFocusedBackground: 人物エリア保護背景処理
# - EnhancedTextRenderer: 2段テキスト描画