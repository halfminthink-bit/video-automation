# ========================================
# Phase 3: AI画像生成設定（Stable Diffusion専用）
# ========================================

# セクションごとの画像生成数
images_per_section: 3

# 画像枚数の動的調整（セクションの長さに応じて自動調整）
dynamic_image_count:
  enabled: false  # デフォルトは無効（既存の動作を維持）
  thresholds:
    long: 500    # 500文字以上の場合5枚
    medium: 300  # 300文字以上の場合4枚
    short: 0     # それ以下は3枚

# AI画像生成設定
ai_generation:
  enabled: true
  service: "stable-diffusion"
  
  # APIキー環境変数名
  stability_api_key_env: "STABILITY_API_KEY"
  claude_api_key_env: "CLAUDE_API_KEY"
  
  # プロンプト最適化（強く推奨）
  optimize_prompts: true
  
  # Stable Diffusion設定
  stable_diffusion:
    model: "sdxl"
    width: 1344    # 16:9に近い
    height: 768
    cfg_scale: 7.5
    steps: 30
    
    # デフォルトスタイル
    default_style: "photorealistic"
    
    # 画像タイプごとのスタイル自動選択
    style_mapping:
      portrait: "photorealistic"      # 肖像画は写実的
      battle: "oil_painting"          # 戦闘シーンは油絵風が映える
      landscape: "photorealistic"     # 風景は写実的
      architecture: "photorealistic"  # 建築物は写実的
      document: "documentary"         # 古文書はドキュメンタリー風
      general: "photorealistic"       # その他は写実的
  
  # コスト管理
  cost_limit:
    per_image_usd: 0.04
    max_total_usd: 2.0           # 1動画あたり最大$2
    warn_threshold_usd: 1.5      # 警告閾値

# バリデーション
validation:
  min_images: 10  # 最低限必要な画像数

# 生成時の設定
generation:
  # エラー時の挙動
  continue_on_error: true        # 1枚失敗しても続行
  max_retries_per_image: 2       # 画像ごとのリトライ回数
  
  # タイムアウト
  timeout_per_image_seconds: 60  # 1枚あたりのタイムアウト

# デバッグモード
debug:
  enabled: false  # デフォルトは無効
  log_prompts: true  # プロンプトをログ出力
  log_section_context: true  # セクション情報をログ出力
  save_metadata: true  # メタデータをJSONで保存