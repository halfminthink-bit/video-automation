# å®Ÿè£…ã‚µãƒãƒªãƒ¼ - Phase 1

## ğŸ“¦ å®Ÿè£…ãƒ•ã‚¡ã‚¤ãƒ«ä¸€è¦§

### æ–°è¦ä½œæˆãƒ•ã‚¡ã‚¤ãƒ«ï¼ˆ4ãƒ•ã‚¡ã‚¤ãƒ«ï¼‰

1. **config/phases/background_video.yaml**
   - èƒŒæ™¯å‹•ç”»ã®è¨­å®šãƒ•ã‚¡ã‚¤ãƒ«
   - opening/main/ending ã®3å‹•ç”»æ§‹æˆ
   - ã‚¿ã‚¤ãƒŸãƒ³ã‚°æ¯”ç‡: 15% / 70% / 15%

2. **src/generators/background_video_selector.py**
   - èƒŒæ™¯å‹•ç”»é¸æŠãƒ­ã‚¸ãƒƒã‚¯
   - BGMã‚»ãƒ¬ã‚¯ã‚¿ãƒ¼ã¨åŒã˜æ§‹é€ 
   - å‹•ç”»ã®é•·ã•ã«åŸºã¥ã„ã¦ã‚»ã‚°ãƒ¡ãƒ³ãƒˆåˆ†å‰²

3. **src/phases/phase_06_subtitles_v2.py**
   - Phase 6ã®æ‹¡å¼µç‰ˆ
   - impact_levelæ©Ÿèƒ½è¿½åŠ 
   - raw_script.yamlã‹ã‚‰impact_phrasesã‚’èª­ã¿è¾¼ã¿

4. **src/phases/phase_07_composition_v2.py**
   - Phase 7ã®æ‹¡å¼µç‰ˆ
   - 2ãƒ‘ã‚¹å‡¦ç†ï¼ˆèƒŒæ™¯å‹•ç”» + ã‚¤ãƒ³ãƒ‘ã‚¯ãƒˆå­—å¹•ï¼‰
   - ffmpegã«ã‚ˆã‚‹é«˜é€Ÿå‹•ç”»ç”Ÿæˆ

### å¤‰æ›´ãƒ•ã‚¡ã‚¤ãƒ«ï¼ˆ1ãƒ•ã‚¡ã‚¤ãƒ«ï¼‰

1. **config/phases/subtitle_generation.yaml**
   - `max_chars_per_line: 18 â†’ 20`

---

## ğŸ¯ ä¸»ãªæ©Ÿèƒ½

### 1. èƒŒæ™¯å‹•ç”»ã‚·ã‚¹ãƒ†ãƒ 

**å‹•ä½œãƒ•ãƒ­ãƒ¼**:
```
éŸ³å£°ã®é•·ã•å–å¾—
  â†“
èƒŒæ™¯å‹•ç”»ã‚»ãƒ¬ã‚¯ã‚¿ãƒ¼ã§3ã‚»ã‚°ãƒ¡ãƒ³ãƒˆç”Ÿæˆ
  â†“
opening (15%) â†’ main (70%) â†’ ending (15%)
```

**ffmpegå‡¦ç†**:
- èƒŒæ™¯å‹•ç”»ã‚’concatã§é€£çµ
- ç”»åƒã‚’70%ç¸®å°ï¼ˆ1344x756ï¼‰
- overlayã§ä¸­å¤®é…ç½®

### 2. ã‚¤ãƒ³ãƒ‘ã‚¯ãƒˆå­—å¹•ã‚·ã‚¹ãƒ†ãƒ 

**å‹•ä½œãƒ•ãƒ­ãƒ¼**:
```
raw_script.yamlèª­ã¿è¾¼ã¿
  â†“
impact_phrasesã‚’æŠ½å‡º
  â†“
å„å­—å¹•ã«impact_levelã‚’åˆ¤å®š
  â†“
subtitle_timing.jsonã«ä¿å­˜
  â†“
ASSå½¢å¼ã§å­—å¹•ç„¼ãè¾¼ã¿
```

**å­—å¹•ã‚¹ã‚¿ã‚¤ãƒ«**:
- Normal: ç™½ãƒ»60pxï¼ˆé€šå¸¸ï¼‰
- ImpactNormal: èµ¤ãƒ»70pxï¼ˆã‚¤ãƒ³ãƒ‘ã‚¯ãƒˆï¼‰

---

## ğŸ“Š ã‚³ãƒ¼ãƒ‰çµ±è¨ˆ

| ãƒ•ã‚¡ã‚¤ãƒ« | è¡Œæ•° | ä¸»ãªæ©Ÿèƒ½ |
|---------|------|---------|
| background_video_selector.py | ~150è¡Œ | èƒŒæ™¯å‹•ç”»é¸æŠ |
| phase_06_subtitles_v2.py | ~520è¡Œ | å­—å¹•ç”Ÿæˆ + impactåˆ¤å®š |
| phase_07_composition_v2.py | ~3800è¡Œ | å‹•ç”»çµ±åˆ + èƒŒæ™¯å‹•ç”» |

---

## ğŸ”§ æŠ€è¡“ã‚¹ã‚¿ãƒƒã‚¯

- **Python 3.11**
- **ffmpeg** - å‹•ç”»å‡¦ç†
- **moviepy** - å‹•ç”»ç·¨é›†ï¼ˆä¸€éƒ¨ä½¿ç”¨ï¼‰
- **YAML** - è¨­å®šãƒ•ã‚¡ã‚¤ãƒ«
- **ASS** - å­—å¹•ãƒ•ã‚©ãƒ¼ãƒãƒƒãƒˆ

---

## âœ… ãƒ†ã‚¹ãƒˆçµæœ

- [x] æ§‹æ–‡ãƒã‚§ãƒƒã‚¯: å…¨ãƒ•ã‚¡ã‚¤ãƒ«æˆåŠŸ
- [x] ã‚¤ãƒ³ãƒãƒ¼ãƒˆãƒã‚§ãƒƒã‚¯: æ­£å¸¸
- [x] è¨­å®šãƒ•ã‚¡ã‚¤ãƒ«: YAMLå½¢å¼æ­£å¸¸

---

## ğŸ“ ä½¿ç”¨ä¾‹

### Phase 6 V2ã®å®Ÿè¡Œ

```bash
python -m src.phases.phase_06_subtitles_v2 "ãƒ¬ã‚ªãƒŠãƒ«ãƒ‰ãƒ€ãƒ´ã‚£ãƒ³ãƒ"
```

**å‡ºåŠ›**:
- `working/ãƒ¬ã‚ªãƒŠãƒ«ãƒ‰ãƒ€ãƒ´ã‚£ãƒ³ãƒ/06_subtitles/subtitle_timing.json` (impact_levelä»˜ã)
- `working/ãƒ¬ã‚ªãƒŠãƒ«ãƒ‰ãƒ€ãƒ´ã‚£ãƒ³ãƒ/06_subtitles/subtitles.srt`

### Phase 7 V2ã®å®Ÿè¡Œ

```bash
python -m src.phases.phase_07_composition_v2 "ãƒ¬ã‚ªãƒŠãƒ«ãƒ‰ãƒ€ãƒ´ã‚£ãƒ³ãƒ"
```

**å‡ºåŠ›**:
- `working/ãƒ¬ã‚ªãƒŠãƒ«ãƒ‰ãƒ€ãƒ´ã‚£ãƒ³ãƒ/07_composition/ãƒ¬ã‚ªãƒŠãƒ«ãƒ‰ãƒ€ãƒ´ã‚£ãƒ³ãƒ_final.mp4`
- `data/output/thumbnails/ãƒ¬ã‚ªãƒŠãƒ«ãƒ‰ãƒ€ãƒ´ã‚£ãƒ³ãƒ_preview.jpg`

---

## ğŸ¬ å‹•ç”»ç”Ÿæˆãƒ•ãƒ­ãƒ¼ï¼ˆV2ç‰ˆï¼‰

```
1. Phase 6 V2: å­—å¹•ç”Ÿæˆ
   â”œâ”€ raw_script.yamlèª­ã¿è¾¼ã¿
   â”œâ”€ impact_phrasesæŠ½å‡º
   â”œâ”€ å­—å¹•ã«impact_levelè¿½åŠ 
   â””â”€ subtitle_timing.jsonä¿å­˜

2. Phase 7 V2: å‹•ç”»çµ±åˆ
   â”œâ”€ Pass 1: èƒŒæ™¯å‹•ç”» + ç”»åƒ70%ç¸®å° + éŸ³å£°
   â”‚   â”œâ”€ èƒŒæ™¯å‹•ç”»é¸æŠï¼ˆopening/main/endingï¼‰
   â”‚   â”œâ”€ ç”»åƒã‚’concatã§é€£çµ
   â”‚   â”œâ”€ ffmpegã§overlay
   â”‚   â””â”€ temp_video_no_subtitles.mp4ç”Ÿæˆ
   â”‚
   â””â”€ Pass 2: ã‚¤ãƒ³ãƒ‘ã‚¯ãƒˆå­—å¹•ç„¼ãè¾¼ã¿
       â”œâ”€ subtitle_timing.jsonèª­ã¿è¾¼ã¿
       â”œâ”€ SRTâ†’ASSå¤‰æ›ï¼ˆimpactå¯¾å¿œï¼‰
       â”œâ”€ ffmpegã§å­—å¹•ç„¼ãè¾¼ã¿
       â””â”€ {subject}_final.mp4ç”Ÿæˆ
```

---

## ğŸš€ ãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹

### å‡¦ç†æ™‚é–“ï¼ˆæ¨å®šï¼‰

- **Phase 6 V2**: 10-30ç§’ï¼ˆå­—å¹•ç”Ÿæˆï¼‰
- **Phase 7 V2 Pass 1**: 1-3åˆ†ï¼ˆèƒŒæ™¯å‹•ç”»çµ±åˆï¼‰
- **Phase 7 V2 Pass 2**: 1-2åˆ†ï¼ˆå­—å¹•ç„¼ãè¾¼ã¿ï¼‰

**åˆè¨ˆ**: ç´„2-5åˆ†ï¼ˆå‹•ç”»ã®é•·ã•ã«ä¾å­˜ï¼‰

---

## ğŸ“š ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆ

- `IMPLEMENTATION_REPORT_PHASE1.md` - è©³ç´°ãªå®Ÿè£…ãƒ¬ãƒãƒ¼ãƒˆ
- `DESIGN.md` - ã‚·ã‚¹ãƒ†ãƒ å…¨ä½“ã®è¨­è¨ˆæ›¸
- `config/phases/background_video.yaml` - èƒŒæ™¯å‹•ç”»è¨­å®š

---

**å®Ÿè£…å®Œäº†**: 2025å¹´11æœˆ19æ—¥
