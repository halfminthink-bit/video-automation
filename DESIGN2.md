# å‰äººå‹•ç”»è‡ªå‹•ç”Ÿæˆã‚·ã‚¹ãƒ†ãƒ  - è©³ç´°è¨­è¨ˆæ›¸ v1.1

**ä½œæˆæ—¥**: 2025å¹´10æœˆ28æ—¥  
**æœ€çµ‚æ›´æ–°**: 2025å¹´11æœˆ03æ—¥
**å¯¾è±¡èª­è€…**: é–‹ç™ºè€…ã€AIè£œåŠ©ãƒ„ãƒ¼ãƒ«  
**è¨­è¨ˆæ–¹é‡**: å¤‰æ›´å®¹æ˜“æ€§ã€ãƒ‡ãƒãƒƒã‚°æ€§ã€ãƒ•ã‚§ãƒ¼ã‚ºç‹¬ç«‹å®Ÿè¡Œã‚’æœ€å„ªå…ˆ

---

## ğŸ“ å¤‰æ›´å±¥æ­´

### v1.1 (2025-11-03)
- **Phase 5 (AIå‹•ç”»ç”Ÿæˆ) ã‚’å‰Šé™¤**: ã‚³ã‚¹ãƒˆå‰Šæ¸›ã®ãŸã‚é™æ­¢ç”»ã‚¢ãƒ‹ãƒ¡ãƒ¼ã‚·ãƒ§ãƒ³ã®ã¿ä½¿ç”¨
- **Phaseç•ªå·ã®å†å‰²ã‚Šå½“ã¦**: å…¨7ãƒ•ã‚§ãƒ¼ã‚ºæ§‹æˆã«å¤‰æ›´
  - Phase 5: BGMé¸æŠ (æ—§Phase 6)
  - Phase 6: å­—å¹•ç”Ÿæˆ (æ—§Phase 7)
  - Phase 7: å‹•ç”»çµ±åˆ (æ—§Phase 8)
- **BGMå›ºå®š3æ›²æ§‹æˆ**: èµ·æ‰¿è»¢çµã«åŸºã¥ã3æ›²å›ºå®š (opening/main/ending)
- **Phase 1ã«BGMæŒ‡å®šè¿½åŠ **: å°æœ¬ç”Ÿæˆæ™‚ã«å„ã‚»ã‚¯ã‚·ãƒ§ãƒ³ã®BGMã‚’æŒ‡å®š

---

## ğŸ—ï¸ ã‚·ã‚¹ãƒ†ãƒ ã‚¢ãƒ¼ã‚­ãƒ†ã‚¯ãƒãƒ£

### å…¨ä½“æ§‹æˆå›³ï¼ˆv1.1ï¼‰

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                      CLI / API Gateway                       â”‚
â”‚                   (src/cli.py, src/api.py)                   â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                     Command Dispatcher                       â”‚
â”‚              å„ãƒ•ã‚§ãƒ¼ã‚ºã¸ã®ãƒ«ãƒ¼ãƒ†ã‚£ãƒ³ã‚°ã‚’æ‹…å½“                  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                              â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    Phase Orchestrator                        â”‚
â”‚               (src/core/orchestrator.py)                     â”‚
â”‚                                                               â”‚
â”‚  â€¢ å„ãƒ•ã‚§ãƒ¼ã‚ºã®å®Ÿè¡Œé †åºç®¡ç†ï¼ˆå…¨7ãƒ•ã‚§ãƒ¼ã‚ºï¼‰                      â”‚
â”‚  â€¢ ã‚¹ã‚­ãƒƒãƒ—åˆ¤å®šï¼ˆæ—¢å­˜å‡ºåŠ›ãŒã‚ã‚Œã°ã‚¹ã‚­ãƒƒãƒ—ï¼‰                     â”‚
â”‚  â€¢ ã‚¨ãƒ©ãƒ¼ãƒãƒ³ãƒ‰ãƒªãƒ³ã‚°ï¼ˆãƒ•ã‚§ãƒ¼ã‚ºå˜ä½ã§ãƒªãƒˆãƒ©ã‚¤ï¼‰                 â”‚
â”‚  â€¢ é€²æ—ç®¡ç†ãƒ»ãƒ­ã‚°è¨˜éŒ²                                          â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                              â†“
        â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
        â”‚   Individual Phase Executors        â”‚
        â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                â†“          â†“          â†“
    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
    â”‚ Phase 1  â”‚  â”‚ Phase 2  â”‚  â”‚ Phase 3  â”‚
    â”‚ å°æœ¬ç”Ÿæˆ  â”‚  â”‚ éŸ³å£°ç”Ÿæˆ  â”‚  â”‚ AIç”»åƒ   â”‚
    â”‚+BGMæŒ‡å®š  â”‚  â”‚          â”‚  â”‚ ç”Ÿæˆ     â”‚
    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                â†“          â†“          â†“
    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
    â”‚ Phase 4  â”‚  â”‚ Phase 5  â”‚  â”‚ Phase 6  â”‚
    â”‚ é™æ­¢ç”»    â”‚  â”‚ BGMé¸æŠ  â”‚  â”‚ å­—å¹•ç”Ÿæˆ  â”‚
    â”‚ ã‚¢ãƒ‹ãƒ¡åŒ–  â”‚  â”‚(å°æœ¬é€£å‹•)â”‚  â”‚          â”‚
    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                â†“          â†“          â†“
                    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                    â”‚ Phase 7  â”‚
                    â”‚ å‹•ç”»çµ±åˆ  â”‚
                    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                         â†“
        â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
        â”‚   Final Output          â”‚
        â”‚   â€¢ å®Œæˆå‹•ç”» (MP4)      â”‚
        â”‚   â€¢ ã‚µãƒ ãƒã‚¤ãƒ« (JPG)    â”‚
        â”‚   â€¢ ãƒ¡ã‚¿ãƒ‡ãƒ¼ã‚¿ (JSON)   â”‚
        â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## ğŸ”„ ãƒ•ã‚§ãƒ¼ã‚ºè©³ç´°è¨­è¨ˆ

### Phase 1: å°æœ¬ç”Ÿæˆï¼ˆScript Generationï¼‰

**è²¬å‹™**: Claude APIã‚’ä½¿ç”¨ã—ã¦æ§‹é€ åŒ–ã•ã‚ŒãŸå°æœ¬ã‚’ç”Ÿæˆï¼ˆBGMæŒ‡å®šå«ã‚€ï¼‰

**å…¥åŠ›**:
- `subjects.json`: å‰äººåãƒªã‚¹ãƒˆ
- `config/phases/script_generation.yaml`: å°æœ¬ç”Ÿæˆè¨­å®š

**å‡¦ç†**:
1. Claude APIã«ãƒ—ãƒ­ãƒ³ãƒ—ãƒˆã‚’é€ä¿¡
2. JSONå½¢å¼ã§å°æœ¬ã‚’å—ã‘å–ã‚‹
3. **å„ã‚»ã‚¯ã‚·ãƒ§ãƒ³ã«BGMæŒ‡å®šï¼ˆopening/main/endingï¼‰ã‚’å«ã‚ã‚‹**
4. Pydanticãƒ¢ãƒ‡ãƒ«ã§ãƒãƒªãƒ‡ãƒ¼ã‚·ãƒ§ãƒ³
5. BGMåˆ‡ã‚Šæ›¿ãˆå›æ•°ã‚’æ¤œè¨¼ï¼ˆæœ€å¤§2å›ï¼‰

**å‡ºåŠ›**:
- `working/{subject}/01_script/script.json`: æ§‹é€ åŒ–å°æœ¬
- `working/{subject}/01_script/metadata.json`: ç”Ÿæˆãƒ¡ã‚¿ãƒ‡ãƒ¼ã‚¿

**è¨­å®šä¾‹ï¼ˆconfig/phases/script_generation.yamlï¼‰**:
```yaml
model: "claude-sonnet-4-20250514"
max_tokens: 8000
temperature: 0.7

sections:
  count_min: 5
  count_max: 7
  target_duration_per_section: 120  # ç§’

# ãƒ—ãƒ­ãƒ³ãƒ—ãƒˆã«èµ·æ‰¿è»¢çµã®æŒ‡ç¤ºã‚’å«ã‚ã‚‹
prompt_template: |
  ã‚ãªãŸã¯æ­´å²è§£èª¬å‹•ç”»ã®å°æœ¬ä½œå®¶ã§ã™ã€‚
  {subject}ã«ã¤ã„ã¦ã€15åˆ†ï¼ˆç´„900ç§’ï¼‰ã®å‹•ç”»å°æœ¬ã‚’ä½œæˆã—ã¦ãã ã•ã„ã€‚
  
  ## èµ·æ‰¿è»¢çµã¨BGMã®é…ç½®ï¼ˆé‡è¦ï¼‰
  å‹•ç”»å…¨ä½“ã‚’èµ·æ‰¿è»¢çµã§æ§‹æˆã—ã€ä»¥ä¸‹ã®ã‚ˆã†ã«BGMã‚’é…ç½®ã—ã¦ãã ã•ã„ï¼š
  
  **BGMã®åˆ‡ã‚Šæ›¿ãˆã¯2å›ã®ã¿:**
  1. Openingï¼ˆèµ·ï¼‰â†’ Mainï¼ˆæ‰¿è»¢ï¼‰ã¸ã®åˆ‡ã‚Šæ›¿ãˆ
  2. Mainï¼ˆæ‰¿è»¢ï¼‰â†’ Endingï¼ˆçµï¼‰ã¸ã®åˆ‡ã‚Šæ›¿ãˆ
  
  **å„BGMã®ä½¿ã„æ–¹:**
  - opening: æœ€åˆã®ã‚»ã‚¯ã‚·ãƒ§ãƒ³ï¼ˆèµ·ï¼‰ã®ã¿ - å°å…¥ã€ä¸–ç•Œè¦³ã®æç¤º
  - main: ä¸­ç›¤ã®ã‚»ã‚¯ã‚·ãƒ§ãƒ³ï¼ˆæ‰¿è»¢ï¼‰- ç‰©èªã®å±•é–‹ã‹ã‚‰ã‚¯ãƒ©ã‚¤ãƒãƒƒã‚¯ã‚¹
  - ending: æœ€å¾Œã®ã‚»ã‚¯ã‚·ãƒ§ãƒ³ï¼ˆçµï¼‰- ä½™éŸ»ã€ã—ã‚“ã¿ã‚Šã¨ã—ãŸç· ã‚
  
  **æ³¨æ„:**
  - åŒã˜BGMãŒé€£ç¶šã—ã¦ä½¿ã‚ã‚Œã‚‹ã“ã¨ãŒå‰æ
  - mainã¯è¤‡æ•°ã‚»ã‚¯ã‚·ãƒ§ãƒ³ã«ã¾ãŸãŒã£ã¦OK
  - èª­å¾Œæ„Ÿã‚’å¤§åˆ‡ã«ã€endingã§ã—ã‚“ã¿ã‚Šã¨ç· ã‚ã‚‹
  
  ## å‡ºåŠ›å½¢å¼ï¼ˆJSONï¼‰
  {
    "sections": [
      {
        "section_id": 1,
        "title": "ã‚»ã‚¯ã‚·ãƒ§ãƒ³ã‚¿ã‚¤ãƒˆãƒ«",
        "narration": "ãƒŠãƒ¬ãƒ¼ã‚·ãƒ§ãƒ³åŸç¨¿",
        "estimated_duration": 120,
        "bgm_suggestion": "opening"  // opening/main/ending
      }
    ]
  }

# ãƒãƒªãƒ‡ãƒ¼ã‚·ãƒ§ãƒ³è¨­å®š
validation:
  min_sections: 4
  max_sections: 8
  max_bgm_switches: 2  # æœ€å¤§2å›ã®åˆ‡ã‚Šæ›¿ãˆ
  require_opening_at_start: true
  require_ending_at_end: true
```

**å°æœ¬å‡ºåŠ›ä¾‹**:
```json
{
  "subject": "ç¹”ç”°ä¿¡é•·",
  "sections": [
    {
      "section_id": 1,
      "title": "å°¾å¼µã®å¤§ã†ã¤ã‘",
      "bgm_suggestion": "opening"
    },
    {
      "section_id": 2,
      "title": "æ¡¶ç‹­é–“ã®å¥‡è·¡",
      "bgm_suggestion": "main"
    },
    {
      "section_id": 3,
      "title": "å¤©ä¸‹å¸ƒæ­¦ã¸ã®é“",
      "bgm_suggestion": "main"
    },
    ...
    {
      "section_id": 7,
      "title": "ä¿¡é•·ãŒéºã—ãŸã‚‚ã®",
      "bgm_suggestion": "ending"
    }
  ]
}
```

---

### Phase 2: éŸ³å£°ç”Ÿæˆï¼ˆAudio Generationï¼‰

**å¤‰æ›´ãªã—** - æ—¢å­˜ã®è¨­è¨ˆã‚’ç¶­æŒ

---

### Phase 3: AIç”»åƒç”Ÿæˆï¼ˆAI Image Generationï¼‰

**å¤‰æ›´ãªã—** - Stable Diffusionã«ã‚ˆã‚‹ç”»åƒç”Ÿæˆã‚’ç¶™ç¶š

---

### Phase 4: é™æ­¢ç”»ã‚¢ãƒ‹ãƒ¡ãƒ¼ã‚·ãƒ§ãƒ³ï¼ˆImage Animationï¼‰

**å¤‰æ›´ãªã—** - MoviePyã«ã‚ˆã‚‹ã‚¢ãƒ‹ãƒ¡ãƒ¼ã‚·ãƒ§ãƒ³å‡¦ç†ã‚’ç¶™ç¶š

---

### Phase 5: BGMé¸æŠï¼ˆBGM Selectionï¼‰ã€æ—§Phase 6ã€‘

**è²¬å‹™**: å°æœ¬ã®bgm_suggestionã«åŸºã¥ã„ã¦BGMã‚’é…ç½®

**é‡è¦ãªå¤‰æ›´**:
- **å›ºå®š3æ›²æ§‹æˆ**: opening/main/endingã®3æ›²ã®ã¿ä½¿ç”¨
- **å°æœ¬é€£å‹•**: Phase 1ã§æŒ‡å®šã•ã‚ŒãŸBGMã‚’ãã®ã¾ã¾ä½¿ç”¨
- **ã‚­ãƒ¼ãƒ¯ãƒ¼ãƒ‰æ¤œå‡ºå»ƒæ­¢**: é›°å›²æ°—ã‚­ãƒ¼ãƒ¯ãƒ¼ãƒ‰ã«ã‚ˆã‚‹è‡ªå‹•é¸æŠã‚’å»ƒæ­¢

**å…¥åŠ›**:
- `working/{subject}/01_script/script.json`: å°æœ¬ï¼ˆBGMæŒ‡å®šå«ã‚€ï¼‰

**å‡¦ç†**:
1. å°æœ¬ã‹ã‚‰å„ã‚»ã‚¯ã‚·ãƒ§ãƒ³ã®`bgm_suggestion`ã‚’èª­ã¿å–ã‚‹
2. å›ºå®šã®3æ›²ï¼ˆopening/main/endingï¼‰ã‚’èª­ã¿è¾¼ã¿
3. ã‚¿ã‚¤ãƒ ãƒ©ã‚¤ãƒ³ä¸Šã«BGMã‚»ã‚°ãƒ¡ãƒ³ãƒˆã‚’é…ç½®
4. BGMåˆ‡ã‚Šæ›¿ãˆæ™‚ã«ã‚¯ãƒ­ã‚¹ãƒ•ã‚§ãƒ¼ãƒ‰è¨­å®š

**å‡ºåŠ›**:
- `working/{subject}/05_bgm/bgm_timeline.json`: BGMã‚¿ã‚¤ãƒ ãƒ©ã‚¤ãƒ³
- `working/{subject}/05_bgm/selected_tracks.json`: ä½¿ç”¨ãƒˆãƒ©ãƒƒã‚¯æƒ…å ±

**è¨­å®šä¾‹ï¼ˆconfig/phases/bgm_selection.yamlï¼‰**:
```yaml
# BGMãƒ©ã‚¤ãƒ–ãƒ©ãƒªã®ãƒ‘ã‚¹
bgm_library_path: "assets/bgm"

# å›ºå®šBGMæ§‹æˆï¼ˆ3æ›²ã®ã¿ä½¿ç”¨ï¼‰
fixed_bgm_structure:
  enabled: true
  
  tracks:
    opening:
      file: "opening/å¤ã®è¡—é“.mp3"
      title: "å¤ã®è¡—é“"
      description: "ã¼ã‚“ã‚„ã‚Šã¯ã˜ã¾ã‚‹æ›²"
      usage: "ã‚ªãƒ¼ãƒ—ãƒ‹ãƒ³ã‚°ï½åºç›¤"
      
    main:
      file: "main/SPQR-ãƒ¡ãƒ¡ãƒ³ãƒˆãƒ¢ãƒª-.mp3"
      title: "SPQR-ãƒ¡ãƒ¡ãƒ³ãƒˆãƒ¢ãƒª-"
      description: "åŸºæœ¬ãƒ¡ã‚¤ãƒ³ã®æ›²"
      usage: "ä¸­ç›¤ï¼ˆãƒ¡ã‚¤ãƒ³ãƒ‘ãƒ¼ãƒˆï¼‰"
      
    ending:
      file: "ending/æœã®è¨ªã‚Œ.mp3"
      title: "æœã®è¨ªã‚Œ"
      description: "ã—ã£ã¨ã‚Šã¨ã—ãŸæ›²"
      usage: "çµ‚ç›¤ï½ã‚¨ãƒ³ãƒ‡ã‚£ãƒ³ã‚°"

# ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆè¨­å®š
default_settings:
  volume: 0.3  # ãƒŠãƒ¬ãƒ¼ã‚·ãƒ§ãƒ³ã®30%ã®éŸ³é‡
  fade_in_duration: 2.0
  fade_out_duration: 2.0

# BGMé–“ã®ãƒˆãƒ©ãƒ³ã‚¸ã‚·ãƒ§ãƒ³
transition_between_tracks:
  type: "crossfade"
  duration: 3.0
```

**BGMé…ç½®ã®ä»•çµ„ã¿**:
```python
# Phase 5ã®å‡¦ç†ãƒ•ãƒ­ãƒ¼
for section in script.sections:
    bgm_type = section.bgm_suggestion  # opening/main/ending
    
    # BGMã‚»ã‚°ãƒ¡ãƒ³ãƒˆä½œæˆ
    segment = BGMSegment(
        track_id=bgm_type.value,
        start_time=current_time,
        duration=section.estimated_duration,
        volume=0.3,
        fade_in=2.0 if åˆ‡ã‚Šæ›¿ã‚ã‚‹å ´åˆ else 0,
        fade_out=2.0
    )
```

**ã‚¿ã‚¤ãƒ ãƒ©ã‚¤ãƒ³ä¾‹**:
```
0:00 - 2:00   opening  (120ç§’)
2:00 - 12:00  main     (600ç§’)
12:00 - 14:00 ending   (120ç§’)
```

---

### Phase 6: å­—å¹•ç”Ÿæˆï¼ˆSubtitle Generationï¼‰ã€æ—§Phase 7ã€‘

**å¤‰æ›´**: ãƒ•ã‚§ãƒ¼ã‚ºç•ªå·ã®ã¿å¤‰æ›´ï¼ˆå‡¦ç†å†…å®¹ã¯åŒã˜ï¼‰

**å…¥åŠ›**:
- `working/{subject}/01_script/script.json`
- `working/{subject}/02_audio/audio_analysis.json`

**å‡ºåŠ›**:
- `working/{subject}/06_subtitles/subtitles.srt`
- `working/{subject}/06_subtitles/subtitle_timing.json`

---

### Phase 7: å‹•ç”»çµ±åˆï¼ˆVideo Compositionï¼‰ã€æ—§Phase 8ã€‘

**å¤‰æ›´**: ãƒ•ã‚§ãƒ¼ã‚ºç•ªå·ã®ã¿å¤‰æ›´ + BGMå‡¦ç†ã®è¿½åŠ 

**å…¥åŠ›**:
- Phase 2-6ã®å…¨ã¦ã®å‡ºåŠ›

**å‡¦ç†**:
1. ã‚¿ã‚¤ãƒ ãƒ©ã‚¤ãƒ³ã®æ§‹ç¯‰ï¼ˆé™æ­¢ç”»ã‚¢ãƒ‹ãƒ¡ãƒ¼ã‚·ãƒ§ãƒ³ã®ã¿ï¼‰
2. éŸ³å£°ãƒˆãƒ©ãƒƒã‚¯ã®çµ±åˆï¼ˆãƒŠãƒ¬ãƒ¼ã‚·ãƒ§ãƒ³ + BGMï¼‰
3. **BGMã®ãƒ«ãƒ¼ãƒ—å‡¦ç†**:
   ```python
   if segment_duration > bgm_file_duration:
       # BGMãƒ•ã‚¡ã‚¤ãƒ«ã‚’ãƒ«ãƒ¼ãƒ—å†ç”Ÿ
       bgm_clip = AudioFileClip(bgm_path)
       bgm_looped = afx.audio_loop(bgm_clip, duration=segment_duration)
   ```
4. å­—å¹•ã‚ªãƒ¼ãƒãƒ¼ãƒ¬ã‚¤
5. MoviePyã§ãƒ¬ãƒ³ãƒ€ãƒªãƒ³ã‚°
6. ã‚µãƒ ãƒã‚¤ãƒ«ç”Ÿæˆ

**å‡ºåŠ›**:
- `output/videos/{subject}.mp4`
- `output/thumbnails/{subject}_thumbnail.jpg`
- `output/metadata/{subject}_metadata.json`

---

## ğŸ“Š ãƒ‡ãƒ¼ã‚¿ãƒ¢ãƒ‡ãƒ«ã®å¤‰æ›´

### BGMType Enumï¼ˆæ–°è¦è¿½åŠ ï¼‰

```python
class BGMType(str, Enum):
    """BGMã‚¿ã‚¤ãƒ—ï¼ˆèµ·æ‰¿è»¢çµå¯¾å¿œï¼‰"""
    OPENING = "opening"  # èµ·: å°å…¥
    MAIN = "main"        # æ‰¿è»¢: å±•é–‹ï½ã‚¯ãƒ©ã‚¤ãƒãƒƒã‚¯ã‚¹
    ENDING = "ending"    # çµ: ä½™éŸ»ã€ç· ã‚
```

### ScriptSectionï¼ˆå¤‰æ›´ï¼‰

```python
class ScriptSection(BaseModel):
    """å°æœ¬ã®1ã‚»ã‚¯ã‚·ãƒ§ãƒ³"""
    section_id: int
    title: str
    narration: str
    estimated_duration: float
    image_keywords: List[str]
    atmosphere: str
    requires_ai_video: bool = False
    ai_video_prompt: Optional[str] = None
    bgm_suggestion: BGMType = Field(  # â† æ–°è¦è¿½åŠ 
        default=BGMType.MAIN,
        description="ã“ã®ã‚»ã‚¯ã‚·ãƒ§ãƒ³ã§ä½¿ç”¨ã™ã‚‹BGM"
    )
```

### BGMTrackï¼ˆå¤‰æ›´ï¼‰

```python
class BGMTrack(BaseModel):
    """BGMéŸ³æº"""
    track_id: str  # "opening", "main", "ending"
    file_path: str
    category: str  # â† æš«å®šçš„ã«track_idã¨åŒã˜å€¤ã‚’ä½¿ç”¨
    duration: float = 0.0
    title: str
    artist: Optional[str] = None
```

---

## ğŸ¯ å®Ÿè£…å„ªå…ˆåº¦ã¨ãƒã‚¤ãƒ«ã‚¹ãƒˆãƒ¼ãƒ³

### Week 1: åŸºç›¤æ§‹ç¯‰
- [x] ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆæ§‹é€ ä½œæˆã€è¨­å®šã‚·ã‚¹ãƒ†ãƒ 
- [x] Phase 1-3ï¼ˆå°æœ¬ã€éŸ³å£°ã€ç”»åƒï¼‰å®Ÿè£…
- [x] Phase 4ï¼ˆé™æ­¢ç”»ã‚¢ãƒ‹ãƒ¡ï¼‰å®Ÿè£…ãƒ»ãƒ†ã‚¹ãƒˆ

### Week 2: BGMãƒ»å­—å¹•ãƒ»çµ±åˆ
- [x] Phase 5ï¼ˆBGMé¸æŠï¼‰å®Ÿè£… â† **å®Œäº†**
- [ ] Phase 6ï¼ˆå­—å¹•ç”Ÿæˆï¼‰å®Ÿè£…
- [ ] Phase 7ï¼ˆå‹•ç”»çµ±åˆï¼‰å®Ÿè£…ãƒ»ãƒ†ã‚¹ãƒˆ

### Week 3: çµ±åˆãƒ»æœ€é©åŒ–
- [ ] ã‚¨ãƒ³ãƒ‰ãƒ„ãƒ¼ã‚¨ãƒ³ãƒ‰ãƒ†ã‚¹ãƒˆ
- [ ] ã‚¨ãƒ©ãƒ¼ãƒãƒ³ãƒ‰ãƒªãƒ³ã‚°å¼·åŒ–
- [ ] ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆæ›´æ–°
- [ ] ãƒãƒƒãƒ•ã‚¡ãƒ»èª¿æ•´

---

## ğŸ’¡ è¨­è¨ˆä¸Šã®é‡è¦ãªæ±ºå®šäº‹é …

### æ±ºå®š1: Phase 5ï¼ˆAIå‹•ç”»ç”Ÿæˆï¼‰ã®å‰Šé™¤
**ç†ç”±**: ã‚³ã‚¹ãƒˆå‰Šæ¸›ï¼ˆ1æœ¬ã‚ãŸã‚Šç´„$10å‰Šæ¸›ï¼‰  
**å½±éŸ¿**: é™æ­¢ç”»ã‚¢ãƒ‹ãƒ¡ãƒ¼ã‚·ãƒ§ãƒ³ã®ã¿ã§å‹•ç”»ã‚’æ§‹æˆ  
**å¯¾å¿œ**: Phase 4ã®ã‚¢ãƒ‹ãƒ¡ãƒ¼ã‚·ãƒ§ãƒ³å“è³ªã‚’å‘ä¸Š

### æ±ºå®š2: BGMå›ºå®š3æ›²æ§‹æˆ
**ç†ç”±**: ã‚·ãƒ³ãƒ—ãƒ«ã§äºˆæ¸¬å¯èƒ½ãªæ§‹æˆ  
**å½±éŸ¿**: èµ·æ‰¿è»¢çµãŒæ˜ç¢ºã«ãªã‚Šã€å‹•ç”»ã®æµã‚ŒãŒè‡ªç„¶  
**å®Ÿè£…**: Phase 1ã§å°æœ¬ä½œæˆæ™‚ã«BGMã‚’æŒ‡å®š

### æ±ºå®š3: Phaseç•ªå·ã®å†å‰²ã‚Šå½“ã¦
**ç†ç”±**: Phase 5å‰Šé™¤ã«ã‚ˆã‚‹ç•ªå·ã®è©°ã‚  
**å½±éŸ¿**: Phase 6â†’5, Phase 7â†’6, Phase 8â†’7ã«å¤‰æ›´  
**æ³¨æ„**: æ—¢å­˜ã‚³ãƒ¼ãƒ‰ã®Phaseç•ªå·å‚ç…§ã‚’å…¨ã¦æ›´æ–°

---

## ğŸ“ CLIä½¿ç”¨ä¾‹ï¼ˆæ›´æ–°ç‰ˆï¼‰

```bash
# å…¨ãƒ•ã‚§ãƒ¼ã‚ºå®Ÿè¡Œï¼ˆ1-7ï¼‰
python -m src.cli generate "ç¹”ç”°ä¿¡é•·"

# ç‰¹å®šãƒ•ã‚§ãƒ¼ã‚ºã®ã¿å®Ÿè¡Œ
python -m src.cli run-phase "ç¹”ç”°ä¿¡é•·" --phase 5  # BGMé¸æŠ

# Phase 5ã‹ã‚‰å®Ÿè¡Œ
python -m src.cli generate "ç¹”ç”°ä¿¡é•·" --from-phase 5

# Phase 6ã¾ã§å®Ÿè¡Œ
python -m src.cli generate "ç¹”ç”°ä¿¡é•·" --until-phase 6

# ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆçŠ¶æ…‹ç¢ºèª
python -m src.cli status "ç¹”ç”°ä¿¡é•·"
# å‡ºåŠ›ä¾‹:
# Subject: ç¹”ç”°ä¿¡é•·
# Status: Phase 5 / 7
# Progress: â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–‘â–‘â–‘ 71%
# 
# Phase Status:
#   [âœ“] Phase 1: Script Generation (12.3s)
#   [âœ“] Phase 2: Audio Generation (45.2s)
#   [âœ“] Phase 3: AI Image Generation (89.4s)
#   [âœ“] Phase 4: Image Animation (156.7s)
#   [âœ“] Phase 5: BGM Selection (2.1s)
#   [ ] Phase 6: Subtitle Generation
#   [ ] Phase 7: Video Composition
```

---

## ğŸ”„ ãƒã‚¤ã‚°ãƒ¬ãƒ¼ã‚·ãƒ§ãƒ³ã‚¬ã‚¤ãƒ‰

### v1.0 â†’ v1.1ã¸ã®ç§»è¡Œ

1. **Phaseç•ªå·ã®æ›´æ–°**:
   ```python
   # æ—§
   phase_06_bgm.py
   phase_07_subtitles.py
   phase_08_composition.py
   
   # æ–°
   phase_05_bgm.py
   phase_06_subtitles.py
   phase_07_composition.py
   ```

2. **è¨­å®šãƒ•ã‚¡ã‚¤ãƒ«ã®æ›´æ–°**:
   ```yaml
   # config/settings.yaml
   phases:
     05_bgm: "config/phases/bgm_selection.yaml"  # æ—§06ã‹ã‚‰å¤‰æ›´
     06_subtitles: "config/phases/subtitle_generation.yaml"  # æ—§07ã‹ã‚‰å¤‰æ›´
     07_composition: "config/phases/video_composition.yaml"  # æ—§08ã‹ã‚‰å¤‰æ›´
   ```

3. **ãƒ‡ãƒ¼ã‚¿ãƒ¢ãƒ‡ãƒ«ã®æ›´æ–°**:
   - `models.py`ã«`BGMType` enumã‚’è¿½åŠ 
   - `ScriptSection`ã«`bgm_suggestion`ãƒ•ã‚£ãƒ¼ãƒ«ãƒ‰ã‚’è¿½åŠ 

4. **Phase 5ï¼ˆæ—§Phase 6ï¼‰ã®å®Ÿè£…æ›´æ–°**:
   - ã‚­ãƒ¼ãƒ¯ãƒ¼ãƒ‰æ¤œå‡ºãƒ­ã‚¸ãƒƒã‚¯ã‚’å‰Šé™¤
   - å°æœ¬ã®`bgm_suggestion`ã‚’ç›´æ¥ä½¿ç”¨

---

**è¨­è¨ˆæ›¸ãƒãƒ¼ã‚¸ãƒ§ãƒ³**: 1.1  
**æœ€çµ‚æ›´æ–°æ—¥**: 2025å¹´11æœˆ03æ—¥  
**æ¬¡å›ãƒ¬ãƒ“ãƒ¥ãƒ¼äºˆå®š**: Phase 7å®Ÿè£…å®Œäº†å¾Œ